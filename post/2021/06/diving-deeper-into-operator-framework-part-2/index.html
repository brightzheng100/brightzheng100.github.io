<!doctype html><html lang=en data-figures=true class=page><head><title>Diving Deeper Into Operator Framework, Part 2 | The future is Bright</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta http-equiv=x-ua-compatible content="IE=edge"><script async src="https://www.googletagmanager.com/gtag/js?id=G-P5722RVWJG"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-P5722RVWJG")</script><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta name=description content="kubernetes deep-dive operator framework kubebuilder"><meta name=twitter:card content="summary"><meta name=twitter:creator content="@bright_zheng"><meta name=twitter:title content="Diving Deeper Into Operator Framework, Part 2"><meta property="og:url" content="https://brightzheng100.github.io/post/2021/06/diving-deeper-into-operator-framework-part-2/"><meta property="og:title" content="Diving Deeper Into Operator Framework, Part 2"><meta property="og:description" content="kubernetes deep-dive operator framework kubebuilder"><meta property="og:image" content="https://brightzheng100.github.io/images/2021/post-diving-deeper-into-operator-framework-part2.png"><link rel=apple-touch-icon sizes=180x180 href=https://brightzheng100.github.io/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://brightzheng100.github.io/icons/favicon-32x32.png><link rel=manifest href=https://brightzheng100.github.io/icons/site.webmanifest><link rel=canonical href=https://brightzheng100.github.io/post/2021/06/diving-deeper-into-operator-framework-part-2/><link rel=preload href=https://brightzheng100.github.io/css/styles.44fa81034ff7ea86cc966ac19f3832410f69e9e3d934b6314f12db45aa441d85959a242feb02ce9c112be4b1d4df423eaccb9633ecba2c6204dda4cb4901fc55.css integrity="sha512-RPqBA0/36obMlmrBnzgyQQ9p6ePZNLYxTxLbRapEHYWVmiQv6wLOnBEr5LHU30I+rMuWM+y6LGIE3aTLSQH8VQ==" as=style crossorigin=anonymous><link rel=preload href=https://brightzheng100.github.io/js/bundle.min.46d7638edbb3eef6c98157e247f37410be3342575f271bd26066e23f74be20aa5cf1d1519041250f2051f7fae327ee6c2da7a5303fb9209cd69220f73ef68003.js as=script integrity="sha512-Rtdjjtuz7vbJgVfiR/N0EL4zQldfJxvSYGbiP3S+IKpc8dFRkEElDyBR9/rjJ+5sLaelMD+5IJzWkiD3PvaAAw==" crossorigin=anonymous><link rel=stylesheet type=text/css href=https://brightzheng100.github.io/css/styles.44fa81034ff7ea86cc966ac19f3832410f69e9e3d934b6314f12db45aa441d85959a242feb02ce9c112be4b1d4df423eaccb9633ecba2c6204dda4cb4901fc55.css integrity="sha512-RPqBA0/36obMlmrBnzgyQQ9p6ePZNLYxTxLbRapEHYWVmiQv6wLOnBEr5LHU30I+rMuWM+y6LGIE3aTLSQH8VQ==" crossorigin=anonymous></head><body data-code=20 data-lines=false id=documentTop><header class=nav_header><nav class=nav><a href=https://brightzheng100.github.io/ class="nav_brand nav_item" title="The future is Bright"><img src=https://brightzheng100.github.io/logos/logo.png class=logo alt="The future is Bright"><div class=nav_close><div><svg class="icon"><use xlink:href="#open-menu"/></svg><svg class="icon"><use xlink:href="#closeme"/></svg></div></div></a><div class='nav_body nav_body_left'><div class=nav_parent><a href=https://brightzheng100.github.io/ class=nav_item title=Home>Home</a></div><div class=nav_parent><a href=https://brightzheng100.github.io/post/ class=nav_item title=Posts>Posts</a></div><div class=nav_parent><a href=https://brightzheng100.github.io/diary/ class=nav_item title="Tech Diary">Tech Diary</a></div><div class=nav_parent><a href=https://brightzheng100.github.io/about/ class=nav_item title="About Me">About Me</a></div><div class=follow><a href=https://github.com/brightzheng100><svg class="icon"><use xlink:href="#github"/></svg></a><a href=https://twitter.com/bright_zheng><svg class="icon"><use xlink:href="#twitter"/></svg></a><a href=https://www.linkedin.com/in/bright-zheng><svg class="icon"><use xlink:href="#linkedin"/></svg></a><a href=https://brightzheng100.github.io/index.xml><svg class="icon"><use xlink:href="#rss"/></svg></a><div class=color_mode><input type=checkbox class=color_choice id=mode></div></div></div></nav></header><main><div class="grid-inverse wrap content"><article class=post_content><h1 class=post_title>Diving Deeper Into Operator Framework, Part 2</h1><div class=post_meta><span><svg class="icon"><use xlink:href="#calendar"/></svg></span><span class=post_date>Jun 6, 2021</span>
<span class=post_time>· 16 min read</span><span>&nbsp;· <a href=https://brightzheng100.github.io/tags/kubernetes title=Kubernetes class="post_tag button button_translucent">Kubernetes
</a><a href=https://brightzheng100.github.io/tags/operator title=Operator class="post_tag button button_translucent">Operator
</a><a href=https://brightzheng100.github.io/tags/operator-sdk title=Operator-SDK class="post_tag button button_translucent">Operator-SDK
</a><a href=https://brightzheng100.github.io/tags/operator-framework title=Operator-Framework class="post_tag button button_translucent">Operator-Framework
</a><a href=https://brightzheng100.github.io/tags/deepdive title=Deepdive class="post_tag button button_translucent">Deepdive
</a><a href=https://brightzheng100.github.io/tags/tutorial title=Tutorial class="post_tag button button_translucent">Tutorial</a></span>
<span class=page_only>&nbsp;·<div class=post_share>Share on:
<a href="https://twitter.com/intent/tweet?text=Diving%20Deeper%20Into%20Operator%20Framework%2c%20Part%202&url=https%3a%2f%2fbrightzheng100.github.io%2fpost%2f2021%2f06%2fdiving-deeper-into-operator-framework-part-2%2f&tw_p=tweetbutton" class=twitter title="Share on Twitter" target=_blank rel=nofollow><svg class="icon"><use xlink:href="#twitter"/></svg></a><a href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fbrightzheng100.github.io%2fpost%2f2021%2f06%2fdiving-deeper-into-operator-framework-part-2%2f&t=Diving%20Deeper%20Into%20Operator%20Framework%2c%20Part%202" class=facebook title="Share on Facebook" target=_blank rel=nofollow><svg class="icon"><use xlink:href="#facebook"/></svg></a><a href=#linkedinshare id=linkedinshare class=linkedin title="Share on LinkedIn" rel=nofollow><svg class="icon"><use xlink:href="#linkedin"/></svg></a><a href=https://brightzheng100.github.io/post/2021/06/diving-deeper-into-operator-framework-part-2/ title="Copy Link" class="link link_yank"><svg class="icon"><use xlink:href="#copy"/></svg></a></div></span></div><img src=/images/2021/post-diving-deeper-into-operator-framework-part2.png class=image_featured alt="Diving Deeper Into Operator Framework, Part 2"><h2>Overview</h2><nav id=TableOfContents><ul><li><a href=#install-olm>Install OLM</a></li><li><a href=#olm-resources>OLM resources</a></li><li><a href=#olm-status>OLM status</a></li><li><a href=#build-and-publish-the-bundle-image>Build and publish the bundle image</a></li><li><a href=#run-the-bundle>Run the bundle</a></li><li><a href=#create-the-cr>Create the CR</a></li><li><a href=#lets-dive-a-bit-deeper-with-what-we-have>Let's dive a bit deeper with what we have</a></li><li><a href=#how-about-upgrade>How about upgrade?</a><ul><li><a href=#make-more-changes-in-our-operator-code>Make more changes in our operator code</a></li><li><a href=#build-and-publish-the-operator-image>Build and publish the operator image</a></li><li><a href=#build-and-publish-the-operator-bundle-image>Build and publish the operator bundle image</a></li><li><a href=#upgrade-the-operator-by-upgrading-the-bundle>Upgrade the operator by upgrading the bundle</a></li></ul></li><li><a href=#but-wait-what-is-the-operator-bundle-and-why-bundle-image>But wait, what is the operator bundle and why bundle image?</a></li><li><a href=#lets-further-prove-it-by-using-the-etcd-operator-published-in-operatorhubio>Let's further prove it by using the <code>etcd</code> operator published in OperatorHub.io</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav><hr><p>This is the part 2 of my blog series about operator frameworks deep-dive.</p><p>In part 1, <a href=/post/2021/06/diving-deeper-into-operator-framework-part1/>here</a>, I've walked you through a typical Kubernetes operator building process and it's time now to answer the
question of "who will monitor the monitors".</p><p>It's <a href=https://olm.operatorframework.io/><code>Operator Lifecycle Manager (OLM)</code></a>: The Operator Lifecycle Manager (OLM) extends Kubernetes to provide a declarative way to install, manage, and upgrade Operators on a cluster.</p><p>The OLM is a component of the <a href=https://www.operatorframework.io/>Operator Framework</a>, an open source toolkit to manage Kubernetes native applications, called Operators, in a streamlined and scalable way.</p><h2 id=install-olm>Install OLM</h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln>1</span><span class=cl>$ operator-sdk olm install
</span></span></code></pre></div><p>Within 2 minutes or so, the installation will be done.</p><p>Let's take a look what have been installed by this command through the logs:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln> 1</span><span class=cl>INFO[0002] Fetching CRDs for version &#34;latest&#34;
</span></span><span class=line><span class=ln> 2</span><span class=cl>INFO[0002] Fetching resources for resolved version &#34;latest&#34;
</span></span><span class=line><span class=ln> 3</span><span class=cl>INFO[0012] Creating CRDs and resources
</span></span><span class=line><span class=ln> 4</span><span class=cl>INFO[0012]   Creating CustomResourceDefinition &#34;catalogsources.operators.coreos.com&#34;
</span></span><span class=line><span class=ln> 5</span><span class=cl>INFO[0012]   Creating CustomResourceDefinition &#34;clusterserviceversions.operators.coreos.com&#34;
</span></span><span class=line><span class=ln> 6</span><span class=cl>INFO[0012]   Creating CustomResourceDefinition &#34;installplans.operators.coreos.com&#34;
</span></span><span class=line><span class=ln> 7</span><span class=cl>INFO[0012]   Creating CustomResourceDefinition &#34;operatorconditions.operators.coreos.com&#34;
</span></span><span class=line><span class=ln> 8</span><span class=cl>INFO[0012]   Creating CustomResourceDefinition &#34;operatorgroups.operators.coreos.com&#34;
</span></span><span class=line><span class=ln> 9</span><span class=cl>INFO[0012]   Creating CustomResourceDefinition &#34;operators.operators.coreos.com&#34;
</span></span><span class=line><span class=ln>10</span><span class=cl>INFO[0012]   Creating CustomResourceDefinition &#34;subscriptions.operators.coreos.com&#34;
</span></span><span class=line><span class=ln>11</span><span class=cl>INFO[0012]   Creating Namespace &#34;olm&#34;
</span></span><span class=line><span class=ln>12</span><span class=cl>INFO[0012]   Creating Namespace &#34;operators&#34;
</span></span><span class=line><span class=ln>13</span><span class=cl>INFO[0013]   Creating ServiceAccount &#34;olm/olm-operator-serviceaccount&#34;
</span></span><span class=line><span class=ln>14</span><span class=cl>INFO[0013]   Creating ClusterRole &#34;system:controller:operator-lifecycle-manager&#34;
</span></span><span class=line><span class=ln>15</span><span class=cl>INFO[0013]   Creating ClusterRoleBinding &#34;olm-operator-binding-olm&#34;
</span></span><span class=line><span class=ln>16</span><span class=cl>INFO[0013]   Creating Deployment &#34;olm/olm-operator&#34;
</span></span><span class=line><span class=ln>17</span><span class=cl>INFO[0013]   Creating Deployment &#34;olm/catalog-operator&#34;
</span></span><span class=line><span class=ln>18</span><span class=cl>INFO[0013]   Creating ClusterRole &#34;aggregate-olm-edit&#34;
</span></span><span class=line><span class=ln>19</span><span class=cl>INFO[0013]   Creating ClusterRole &#34;aggregate-olm-view&#34;
</span></span><span class=line><span class=ln>20</span><span class=cl>INFO[0013]   Creating OperatorGroup &#34;operators/global-operators&#34;
</span></span><span class=line><span class=ln>21</span><span class=cl>INFO[0016]   Creating OperatorGroup &#34;olm/olm-operators&#34;
</span></span><span class=line><span class=ln>22</span><span class=cl>INFO[0016]   Creating ClusterServiceVersion &#34;olm/packageserver&#34;
</span></span><span class=line><span class=ln>23</span><span class=cl>INFO[0017]   Creating CatalogSource &#34;olm/operatorhubio-catalog&#34;
</span></span><span class=line><span class=ln>24</span><span class=cl>INFO[0017] Waiting for deployment/olm-operator rollout to complete
</span></span><span class=line><span class=ln>25</span><span class=cl>INFO[0017]   Waiting for Deployment &#34;olm/olm-operator&#34; to rollout: 0 of 1 updated replicas are available
</span></span><span class=line><span class=ln>26</span><span class=cl>INFO[0035]   Deployment &#34;olm/olm-operator&#34; successfully rolled out
</span></span><span class=line><span class=ln>27</span><span class=cl>INFO[0035] Waiting for deployment/catalog-operator rollout to complete
</span></span><span class=line><span class=ln>28</span><span class=cl>INFO[0035]   Deployment &#34;olm/catalog-operator&#34; successfully rolled out
</span></span><span class=line><span class=ln>29</span><span class=cl>INFO[0035] Waiting for deployment/packageserver rollout to complete
</span></span><span class=line><span class=ln>30</span><span class=cl>INFO[0035]   Waiting for Deployment &#34;olm/packageserver&#34; to appear
</span></span><span class=line><span class=ln>31</span><span class=cl>INFO[0037]   Waiting for Deployment &#34;olm/packageserver&#34; to rollout: 0 of 2 updated replicas are available
</span></span><span class=line><span class=ln>32</span><span class=cl>INFO[0052]   Deployment &#34;olm/packageserver&#34; successfully rolled out
</span></span><span class=line><span class=ln>33</span><span class=cl>INFO[0052] Successfully installed OLM version &#34;latest&#34;
</span></span><span class=line><span class=ln>34</span><span class=cl>
</span></span><span class=line><span class=ln>35</span><span class=cl>NAME                                            NAMESPACE    KIND                        STATUS
</span></span><span class=line><span class=ln>36</span><span class=cl>catalogsources.operators.coreos.com                          CustomResourceDefinition    Installed
</span></span><span class=line><span class=ln>37</span><span class=cl>clusterserviceversions.operators.coreos.com                  CustomResourceDefinition    Installed
</span></span><span class=line><span class=ln>38</span><span class=cl>installplans.operators.coreos.com                            CustomResourceDefinition    Installed
</span></span><span class=line><span class=ln>39</span><span class=cl>operatorconditions.operators.coreos.com                      CustomResourceDefinition    Installed
</span></span><span class=line><span class=ln>40</span><span class=cl>operatorgroups.operators.coreos.com                          CustomResourceDefinition    Installed
</span></span><span class=line><span class=ln>41</span><span class=cl>operators.operators.coreos.com                               CustomResourceDefinition    Installed
</span></span><span class=line><span class=ln>42</span><span class=cl>subscriptions.operators.coreos.com                           CustomResourceDefinition    Installed
</span></span><span class=line><span class=ln>43</span><span class=cl>olm                                                          Namespace                   Installed
</span></span><span class=line><span class=ln>44</span><span class=cl>operators                                                    Namespace                   Installed
</span></span><span class=line><span class=ln>45</span><span class=cl>olm-operator-serviceaccount                     olm          ServiceAccount              Installed
</span></span><span class=line><span class=ln>46</span><span class=cl>system:controller:operator-lifecycle-manager                 ClusterRole                 Installed
</span></span><span class=line><span class=ln>47</span><span class=cl>olm-operator-binding-olm                                     ClusterRoleBinding          Installed
</span></span><span class=line><span class=ln>48</span><span class=cl>olm-operator                                    olm          Deployment                  Installed
</span></span><span class=line><span class=ln>49</span><span class=cl>catalog-operator                                olm          Deployment                  Installed
</span></span><span class=line><span class=ln>50</span><span class=cl>aggregate-olm-edit                                           ClusterRole                 Installed
</span></span><span class=line><span class=ln>51</span><span class=cl>aggregate-olm-view                                           ClusterRole                 Installed
</span></span><span class=line><span class=ln>52</span><span class=cl>global-operators                                operators    OperatorGroup               Installed
</span></span><span class=line><span class=ln>53</span><span class=cl>olm-operators                                   olm          OperatorGroup               Installed
</span></span><span class=line><span class=ln>54</span><span class=cl>packageserver                                   olm          ClusterServiceVersion       Installed
</span></span><span class=line><span class=ln>55</span><span class=cl>operatorhubio-catalog                           olm          CatalogSource               Installed
</span></span></code></pre></div><p>Well, that's a lot! So, firstly, let's understand the OLM resources.</p><h2 id=olm-resources>OLM resources</h2><p>The following custom resource definitions (CRDs) are defined and managed by Operator Lifecycle Manager (OLM).</p><p>I try to use plain English, instead of copy-pasting from official docs, to explain what they are and how they work together.</p><table><thead><tr><th>Resource</th><th>Short name</th><th>Description</th></tr></thead><tbody><tr><td>CatalogSource</td><td>catsrc</td><td>A repository of CSVs, CRDs, and packages that define an operator, or maybe a set of operators.</td></tr><tr><td>ClusterServiceVersion</td><td>csv</td><td>Operator metadata. For example: name, version, icon, required resources.</td></tr><tr><td>Subscription</td><td>sub</td><td>Calculated list of resources to be created to automatically install or upgrade a CSV.</td></tr><tr><td>OperatorGroup</td><td>og</td><td>Defines where to watch for CRs: a namespace, multiple namespaces, or cluster-wide and binds to CSV through annotation of <code>olm.operatorGroup</code>.</td></tr><tr><td>OperatorConditions</td><td>N/A</td><td>Creates a communication channel between OLM and an Operator it manages. Operators can write to the Status.Conditions array to communicate complex states to OLM.</td></tr></tbody></table><p>In the real world, the <code>CatalogSource</code>, <code>Subscription</code> and <code>OperatorGroup</code> are the most important objects that we must understand.</p><h2 id=olm-status>OLM status</h2><p><code>operator-sdk</code> CLI provides a handy command to check the status of OLM:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln> 1</span><span class=cl>$ operator-sdk olm status
</span></span><span class=line><span class=ln> 2</span><span class=cl>INFO<span class=o>[</span>0001<span class=o>]</span> Fetching CRDs <span class=k>for</span> version <span class=s2>&#34;0.18.1&#34;</span>
</span></span><span class=line><span class=ln> 3</span><span class=cl>INFO<span class=o>[</span>0001<span class=o>]</span> Fetching resources <span class=k>for</span> resolved version <span class=s2>&#34;v0.18.1&#34;</span>
</span></span><span class=line><span class=ln> 4</span><span class=cl>INFO<span class=o>[</span>0002<span class=o>]</span> Successfully got OLM status <span class=k>for</span> version <span class=s2>&#34;0.18.1&#34;</span>
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl>NAME                                            NAMESPACE    KIND                        STATUS
</span></span><span class=line><span class=ln> 7</span><span class=cl>operators.operators.coreos.com                               CustomResourceDefinition    Installed
</span></span><span class=line><span class=ln> 8</span><span class=cl>operatorgroups.operators.coreos.com                          CustomResourceDefinition    Installed
</span></span><span class=line><span class=ln> 9</span><span class=cl>operatorconditions.operators.coreos.com                      CustomResourceDefinition    Installed
</span></span><span class=line><span class=ln>10</span><span class=cl>installplans.operators.coreos.com                            CustomResourceDefinition    Installed
</span></span><span class=line><span class=ln>11</span><span class=cl>clusterserviceversions.operators.coreos.com                  CustomResourceDefinition    Installed
</span></span><span class=line><span class=ln>12</span><span class=cl>olm-operator                                    olm          Deployment                  Installed
</span></span><span class=line><span class=ln>13</span><span class=cl>olm-operator-binding-olm                                     ClusterRoleBinding          Installed
</span></span><span class=line><span class=ln>14</span><span class=cl>operatorhubio-catalog                           olm          CatalogSource               Installed
</span></span><span class=line><span class=ln>15</span><span class=cl>olm-operators                                   olm          OperatorGroup               Installed
</span></span><span class=line><span class=ln>16</span><span class=cl>aggregate-olm-view                                           ClusterRole                 Installed
</span></span><span class=line><span class=ln>17</span><span class=cl>catalog-operator                                olm          Deployment                  Installed
</span></span><span class=line><span class=ln>18</span><span class=cl>subscriptions.operators.coreos.com                           CustomResourceDefinition    Installed
</span></span><span class=line><span class=ln>19</span><span class=cl>aggregate-olm-edit                                           ClusterRole                 Installed
</span></span><span class=line><span class=ln>20</span><span class=cl>olm                                                          Namespace                   Installed
</span></span><span class=line><span class=ln>21</span><span class=cl>global-operators                                operators    OperatorGroup               Installed
</span></span><span class=line><span class=ln>22</span><span class=cl>operators                                                    Namespace                   Installed
</span></span><span class=line><span class=ln>23</span><span class=cl>packageserver                                   olm          ClusterServiceVersion       Installed
</span></span><span class=line><span class=ln>24</span><span class=cl>olm-operator-serviceaccount                     olm          ServiceAccount              Installed
</span></span><span class=line><span class=ln>25</span><span class=cl>catalogsources.operators.coreos.com                          CustomResourceDefinition    Installed
</span></span><span class=line><span class=ln>26</span><span class=cl>system:controller:operator-lifecycle-manager                 ClusterRole                 Installed
</span></span></code></pre></div><h2 id=build-and-publish-the-bundle-image>Build and publish the bundle image</h2><p>Generate the bundle files, build and publish the bundle image:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln>1</span><span class=cl><span class=c1># In part 1 we&#39;ve already updated the Makefile to avoid specifying IMG</span>
</span></span><span class=line><span class=ln>2</span><span class=cl><span class=c1># make bundle IMG=&#34;brightzheng100/memcached-operator:v0.0.1&#34;</span>
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=c1># make bundle-build bundle-push IMAGE_TAG_BASE=&#34;brightzheng100/memcached-operator&#34; VERSION=&#34;0.0.1&#34;</span>
</span></span><span class=line><span class=ln>4</span><span class=cl>make bundle
</span></span><span class=line><span class=ln>5</span><span class=cl>make bundle-build bundle-push
</span></span></code></pre></div><p>Note: If you run <code>make bundle</code> at first time, there are some questions prompted for your inputs, which are some of the metadata used to build the CSV:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln> 1</span><span class=cl>Display name for the operator (required):
</span></span><span class=line><span class=ln> 2</span><span class=cl>&gt; Memcached Operator
</span></span><span class=line><span class=ln> 3</span><span class=cl>
</span></span><span class=line><span class=ln> 4</span><span class=cl>Description for the operator (required):
</span></span><span class=line><span class=ln> 5</span><span class=cl>&gt; Memcached Operator built by Bright for fun
</span></span><span class=line><span class=ln> 6</span><span class=cl>
</span></span><span class=line><span class=ln> 7</span><span class=cl>Provider&#39;s name for the operator (required):
</span></span><span class=line><span class=ln> 8</span><span class=cl>&gt; Bright Corp
</span></span><span class=line><span class=ln> 9</span><span class=cl>
</span></span><span class=line><span class=ln>10</span><span class=cl>Any relevant URL for the provider name (optional):
</span></span><span class=line><span class=ln>11</span><span class=cl>&gt; https://brightzheng100.github.io
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>Comma-separated list of keywords for your operator (required):
</span></span><span class=line><span class=ln>14</span><span class=cl>&gt; memcached,operator,kubernetes,operator-sdk
</span></span><span class=line><span class=ln>15</span><span class=cl>
</span></span><span class=line><span class=ln>16</span><span class=cl>Comma-separated list of maintainers and their emails (e.g. &#39;name1:email1, name2:email2&#39;) (required):
</span></span><span class=line><span class=ln>17</span><span class=cl>&gt; someemail AT someemail.com
</span></span><span class=line><span class=ln>18</span><span class=cl>...
</span></span></code></pre></div><p>And a series of folders and files will be generated, which include:</p><ul><li>a new <code>bundle</code> folder</li><li>a new <code>bundle.Dockerfile</code> file</li><li>a new CSV file under <code>config/mannifests/bases/</code> folder</li></ul><p>And once we've done the <code>bundle-build bundle-push</code>, the bundle image will be built and published.</p><h2 id=run-the-bundle>Run the bundle</h2><p>Run the bundle, to install the operator, with a specified namespace if you want:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln>1</span><span class=cl>$ operator-sdk run bundle docker.io/brightzheng100/memcached-operator-bundle:v0.0.1 -n operators
</span></span></code></pre></div><p>And we should be able to see some logs like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln> 1</span><span class=cl>INFO[0017] Successfully created registry pod: docker-io-brightzheng100-memcached-operator-bundle-v0-0-1
</span></span><span class=line><span class=ln> 2</span><span class=cl>INFO[0018] Created CatalogSource: memcached-operator-catalog
</span></span><span class=line><span class=ln> 3</span><span class=cl>INFO[0018] OperatorGroup &#34;operator-sdk-og&#34; created
</span></span><span class=line><span class=ln> 4</span><span class=cl>INFO[0018] Created Subscription: memcached-operator-v0-0-1-sub
</span></span><span class=line><span class=ln> 5</span><span class=cl>INFO[0025] Approved InstallPlan install-j4476 for the Subscription: memcached-operator-v0-0-1-sub
</span></span><span class=line><span class=ln> 6</span><span class=cl>INFO[0025] Waiting for ClusterServiceVersion &#34;default/memcached-operator.v0.0.1&#34; to reach &#39;Succeeded&#39; phase
</span></span><span class=line><span class=ln> 7</span><span class=cl>INFO[0025]   Waiting for ClusterServiceVersion &#34;default/memcached-operator.v0.0.1&#34; to appear
</span></span><span class=line><span class=ln> 8</span><span class=cl>INFO[0050]   Found ClusterServiceVersion &#34;default/memcached-operator.v0.0.1&#34; phase: Pending
</span></span><span class=line><span class=ln> 9</span><span class=cl>INFO[0052]   Found ClusterServiceVersion &#34;default/memcached-operator.v0.0.1&#34; phase: Installing
</span></span><span class=line><span class=ln>10</span><span class=cl>INFO[0063]   Found ClusterServiceVersion &#34;default/memcached-operator.v0.0.1&#34; phase: Succeeded
</span></span><span class=line><span class=ln>11</span><span class=cl>INFO[0063] OLM has successfully installed &#34;memcached-operator.v0.0.1&#34;
</span></span></code></pre></div><p>And objects are installed into specified namespace, here is <code>operators</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln> 1</span><span class=cl><span class=c1># Check out the pods</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>$ kubectl get pods -n operators
</span></span><span class=line><span class=ln> 3</span><span class=cl>NAME                                                              READY   STATUS      RESTARTS   AGE
</span></span><span class=line><span class=ln> 4</span><span class=cl>c551e776de29960763c9167350ea816c5da7be5de6ff4def66c1e48acc6w8vn   0/1     Completed   <span class=m>0</span>          88s
</span></span><span class=line><span class=ln> 5</span><span class=cl>docker-io-brightzheng100-memcached-operator-bundle-v0-0-1         1/1     Running     <span class=m>0</span>          98s
</span></span><span class=line><span class=ln> 6</span><span class=cl>memcached-operator-controller-manager-77d65c8c67-rjvt7            2/2     Running     <span class=m>0</span>          76s
</span></span><span class=line><span class=ln> 7</span><span class=cl>
</span></span><span class=line><span class=ln> 8</span><span class=cl><span class=c1># Check out all CRs created</span>
</span></span><span class=line><span class=ln> 9</span><span class=cl>$ kubectl get CatalogSource,ClusterServiceVersion,Subscription,OperatorGroup,OperatorConditions -n operators
</span></span><span class=line><span class=ln>10</span><span class=cl>NAME                                                            DISPLAY              TYPE   PUBLISHER      AGE
</span></span><span class=line><span class=ln>11</span><span class=cl>catalogsource.operators.coreos.com/memcached-operator-catalog   memcached-operator   grpc   operator-sdk   2m37s
</span></span><span class=line><span class=ln>12</span><span class=cl>
</span></span><span class=line><span class=ln>13</span><span class=cl>NAME                                                                   DISPLAY              VERSION   REPLACES   PHASE
</span></span><span class=line><span class=ln>14</span><span class=cl>clusterserviceversion.operators.coreos.com/memcached-operator.v0.0.1   Memcached Operator   0.0.1                Succeeded
</span></span><span class=line><span class=ln>15</span><span class=cl>
</span></span><span class=line><span class=ln>16</span><span class=cl>NAME                                                              PACKAGE              SOURCE                       CHANNEL
</span></span><span class=line><span class=ln>17</span><span class=cl>subscription.operators.coreos.com/memcached-operator-v0-0-1-sub   memcached-operator   memcached-operator-catalog   alpha
</span></span><span class=line><span class=ln>18</span><span class=cl>
</span></span><span class=line><span class=ln>19</span><span class=cl>NAME                                                  AGE
</span></span><span class=line><span class=ln>20</span><span class=cl>operatorgroup.operators.coreos.com/global-operators   6d22h
</span></span><span class=line><span class=ln>21</span><span class=cl>
</span></span><span class=line><span class=ln>22</span><span class=cl>NAME                                                               AGE
</span></span><span class=line><span class=ln>23</span><span class=cl>operatorcondition.operators.coreos.com/memcached-operator.v0.0.1   2m10s
</span></span></code></pre></div><blockquote><p>Note:</p><ol><li>If your bundle image is hosted in a registry that is private and/or has a custom CA, <a href=https://sdk.operatorframework.io/docs/olm-integration/cli-overview/#private-bundle-and-catalog-image-registries>these configuration steps</a> must be completed.</li><li>This must be the <strong>bundle</strong> image instead of the <strong>operator</strong> image, otherwise you would get errors like <code>FATA[0012] Failed to run bundle: load bundle metadata: metadata not found in bundle-073235499</code>.</li></ol></blockquote><h2 id=create-the-cr>Create the CR</h2><p>Let's track the logs of the created operator pod:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln>1</span><span class=cl>kubectl logs memcached-operator-controller-manager-77d65c8c67-rjvt7 -n operators -f --all-containers
</span></span></code></pre></div><p>And then create and delete the CR:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln> 1</span><span class=cl><span class=c1># Create a CR, which can refer to the example under /config/samples/cache_v1alpha1_memcached.yaml</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>$ kubectl apply -f - <span class=s>&lt;&lt;EOF
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=s>apiVersion: cache.example.com/v1alpha1
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=s>kind: Memcached
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=s>metadata:
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=s>  name: memcached-sample
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=s>spec:
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=s>  # Add fields here
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=s>  foo: bar
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=c1># Check it out</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>$ kubectl get Memcached
</span></span><span class=line><span class=ln>14</span><span class=cl>NAME               AGE
</span></span><span class=line><span class=ln>15</span><span class=cl>memcached-sample   29s
</span></span><span class=line><span class=ln>16</span><span class=cl>
</span></span><span class=line><span class=ln>17</span><span class=cl><span class=c1># Then delete it</span>
</span></span><span class=line><span class=ln>18</span><span class=cl>$ kubectl delete Memcached/memcached-sample
</span></span></code></pre></div><p>We should be able to see exactly the same message twice, as the experiment we did in <a href=https://brightzheng100.github.io/post/2021/06/diving-deeper-into-operator-framework-part1/>part 1</a>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=ln>1</span><span class=cl>2021-06-05T13:25:28.760Z	INFO	controllers.Memcached	great, the Reconcile is really triggered!
</span></span><span class=line><span class=ln>2</span><span class=cl>2021-06-05T13:26:18.726Z	INFO	controllers.Memcached	great, the Reconcile is really triggered!
</span></span></code></pre></div><p>So you've seen that the operator works the same as the one we manually deployed.</p><h2 id=lets-dive-a-bit-deeper-with-what-we-have>Let's dive a bit deeper with what we have</h2><p>The operator has been installed into the purposely specified namespace <code>operators</code>, which can be any namespace actually.</p><p>Now let's check out the yaml, which is a deployment:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln>1</span><span class=cl>$ kubectl get deploy -n operators memcached-operator-controller-manager -o yaml
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln>  1</span><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>apps/v1</span><span class=w>
</span></span></span><span class=line><span class=ln>  2</span><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Deployment</span><span class=w>
</span></span></span><span class=line><span class=ln>  3</span><span class=cl><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>  4</span><span class=cl><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>  5</span><span class=cl><span class=w>    </span><span class=nt>deployment.kubernetes.io/revision</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;1&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>  6</span><span class=cl><span class=w>  </span><span class=nt>creationTimestamp</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;2021-06-05T13:21:57Z&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln>  7</span><span class=cl><span class=w>  </span><span class=nt>generation</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=ln>  8</span><span class=cl><span class=w>  </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>  9</span><span class=cl><span class=w>    </span><span class=nt>olm.deployment-spec-hash</span><span class=p>:</span><span class=w> </span><span class=l>b95697767</span><span class=w>
</span></span></span><span class=line><span class=ln> 10</span><span class=cl><span class=w>    </span><span class=nt>olm.owner</span><span class=p>:</span><span class=w> </span><span class=l>memcached-operator.v0.0.1</span><span class=w>
</span></span></span><span class=line><span class=ln> 11</span><span class=cl><span class=w>    </span><span class=nt>olm.owner.kind</span><span class=p>:</span><span class=w> </span><span class=l>ClusterServiceVersion</span><span class=w>
</span></span></span><span class=line><span class=ln> 12</span><span class=cl><span class=w>    </span><span class=nt>olm.owner.namespace</span><span class=p>:</span><span class=w> </span><span class=l>operators</span><span class=w>
</span></span></span><span class=line><span class=ln> 13</span><span class=cl><span class=w>    </span><span class=nt>operators.coreos.com/memcached-operator.operators</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln> 14</span><span class=cl><span class=w>    </span><span class=nt>manager</span><span class=p>:</span><span class=w> </span><span class=l>kube-controller-manager</span><span class=w>
</span></span></span><span class=line><span class=ln> 15</span><span class=cl><span class=w>    </span><span class=nt>operation</span><span class=p>:</span><span class=w> </span><span class=l>Update</span><span class=w>
</span></span></span><span class=line><span class=ln> 16</span><span class=cl><span class=w>    </span><span class=nt>time</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;2021-06-05T13:28:35Z&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln> 17</span><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>memcached-operator-controller-manager</span><span class=w>
</span></span></span><span class=line><span class=ln> 18</span><span class=cl><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>operators</span><span class=w>
</span></span></span><span class=line><span class=ln> 19</span><span class=cl><span class=w>  </span><span class=nt>ownerReferences</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 20</span><span class=cl><span class=w>  </span>- <span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>operators.coreos.com/v1alpha1</span><span class=w>
</span></span></span><span class=line><span class=ln> 21</span><span class=cl><span class=w>    </span><span class=nt>blockOwnerDeletion</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=ln> 22</span><span class=cl><span class=w>    </span><span class=nt>controller</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=ln> 23</span><span class=cl><span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ClusterServiceVersion</span><span class=w>
</span></span></span><span class=line><span class=ln> 24</span><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>memcached-operator.v0.0.1</span><span class=w>
</span></span></span><span class=line><span class=ln> 25</span><span class=cl><span class=w>    </span><span class=nt>uid</span><span class=p>:</span><span class=w> </span><span class=l>05d41d88-8886-4ede-b2cc-8fd43f72259d</span><span class=w>
</span></span></span><span class=line><span class=ln> 26</span><span class=cl><span class=w>  </span><span class=nt>resourceVersion</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;469189&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln> 27</span><span class=cl><span class=w>  </span><span class=nt>uid</span><span class=p>:</span><span class=w> </span><span class=l>9bfef7a8-ac72-4a6d-833b-0d4a436b5a74</span><span class=w>
</span></span></span><span class=line><span class=ln> 28</span><span class=cl><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 29</span><span class=cl><span class=w>  </span><span class=nt>progressDeadlineSeconds</span><span class=p>:</span><span class=w> </span><span class=m>600</span><span class=w>
</span></span></span><span class=line><span class=ln> 30</span><span class=cl><span class=w>  </span><span class=nt>replicas</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=ln> 31</span><span class=cl><span class=w>  </span><span class=nt>revisionHistoryLimit</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=ln> 32</span><span class=cl><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 33</span><span class=cl><span class=w>    </span><span class=nt>matchLabels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 34</span><span class=cl><span class=w>      </span><span class=nt>control-plane</span><span class=p>:</span><span class=w> </span><span class=l>controller-manager</span><span class=w>
</span></span></span><span class=line><span class=ln> 35</span><span class=cl><span class=w>  </span><span class=nt>strategy</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 36</span><span class=cl><span class=w>    </span><span class=nt>rollingUpdate</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 37</span><span class=cl><span class=w>      </span><span class=nt>maxSurge</span><span class=p>:</span><span class=w> </span><span class=m>25</span><span class=l>%</span><span class=w>
</span></span></span><span class=line><span class=ln> 38</span><span class=cl><span class=w>      </span><span class=nt>maxUnavailable</span><span class=p>:</span><span class=w> </span><span class=m>25</span><span class=l>%</span><span class=w>
</span></span></span><span class=line><span class=ln> 39</span><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>RollingUpdate</span><span class=w>
</span></span></span><span class=line><span class=ln> 40</span><span class=cl><span class=w>  </span><span class=nt>template</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 41</span><span class=cl><span class=w>    </span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 42</span><span class=cl><span class=w>      </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 43</span><span class=cl><span class=w>        </span><span class=nt>alm-examples</span><span class=p>:</span><span class=w> </span><span class=p>|-</span><span class=sd>
</span></span></span><span class=line><span class=ln> 44</span><span class=cl><span class=sd>          [
</span></span></span><span class=line><span class=ln> 45</span><span class=cl><span class=sd>            {
</span></span></span><span class=line><span class=ln> 46</span><span class=cl><span class=sd>              &#34;apiVersion&#34;: &#34;cache.example.com/v1alpha1&#34;,
</span></span></span><span class=line><span class=ln> 47</span><span class=cl><span class=sd>              &#34;kind&#34;: &#34;Memcached&#34;,
</span></span></span><span class=line><span class=ln> 48</span><span class=cl><span class=sd>              &#34;metadata&#34;: {
</span></span></span><span class=line><span class=ln> 49</span><span class=cl><span class=sd>                &#34;name&#34;: &#34;memcached-sample&#34;
</span></span></span><span class=line><span class=ln> 50</span><span class=cl><span class=sd>              },
</span></span></span><span class=line><span class=ln> 51</span><span class=cl><span class=sd>              &#34;spec&#34;: {
</span></span></span><span class=line><span class=ln> 52</span><span class=cl><span class=sd>                &#34;foo&#34;: &#34;bar&#34;
</span></span></span><span class=line><span class=ln> 53</span><span class=cl><span class=sd>              }
</span></span></span><span class=line><span class=ln> 54</span><span class=cl><span class=sd>            }
</span></span></span><span class=line><span class=ln> 55</span><span class=cl><span class=sd>          ]</span><span class=w>          
</span></span></span><span class=line><span class=ln> 56</span><span class=cl><span class=w>        </span><span class=nt>capabilities</span><span class=p>:</span><span class=w> </span><span class=l>Basic Install</span><span class=w>
</span></span></span><span class=line><span class=ln> 57</span><span class=cl><span class=w>        </span><span class=nt>olm.operatorGroup</span><span class=p>:</span><span class=w> </span><span class=l>global-operators</span><span class=w>
</span></span></span><span class=line><span class=ln> 58</span><span class=cl><span class=w>        </span><span class=nt>olm.operatorNamespace</span><span class=p>:</span><span class=w> </span><span class=l>operators</span><span class=w>
</span></span></span><span class=line><span class=ln> 59</span><span class=cl><span class=w>        </span><span class=nt>olm.targetNamespaces</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;&#34;</span><span class=w>
</span></span></span><span class=line><span class=ln> 60</span><span class=cl><span class=w>        </span><span class=nt>operatorframework.io/properties</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;{&#34;properties&#34;:[{&#34;type&#34;:&#34;olm.gvk&#34;,&#34;value&#34;:{&#34;group&#34;:&#34;cache.example.com&#34;,&#34;kind&#34;:&#34;Memcached&#34;,&#34;version&#34;:&#34;v1alpha1&#34;}},{&#34;type&#34;:&#34;olm.package&#34;,&#34;value&#34;:{&#34;packageName&#34;:&#34;memcached-operator&#34;,&#34;version&#34;:&#34;0.0.1&#34;}}]}&#39;</span><span class=w>
</span></span></span><span class=line><span class=ln> 61</span><span class=cl><span class=w>        </span><span class=nt>operators.operatorframework.io/builder</span><span class=p>:</span><span class=w> </span><span class=l>operator-sdk-v1.7.1+git</span><span class=w>
</span></span></span><span class=line><span class=ln> 62</span><span class=cl><span class=w>        </span><span class=nt>operators.operatorframework.io/project_layout</span><span class=p>:</span><span class=w> </span><span class=l>go.kubebuilder.io/v3</span><span class=w>
</span></span></span><span class=line><span class=ln> 63</span><span class=cl><span class=w>      </span><span class=nt>creationTimestamp</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=w>
</span></span></span><span class=line><span class=ln> 64</span><span class=cl><span class=w>      </span><span class=nt>labels</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 65</span><span class=cl><span class=w>        </span><span class=nt>control-plane</span><span class=p>:</span><span class=w> </span><span class=l>controller-manager</span><span class=w>
</span></span></span><span class=line><span class=ln> 66</span><span class=cl><span class=w>    </span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 67</span><span class=cl><span class=w>      </span><span class=nt>containers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 68</span><span class=cl><span class=w>      </span>- <span class=nt>args</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 69</span><span class=cl><span class=w>        </span>- --<span class=l>secure-listen-address=0.0.0.0:8443</span><span class=w>
</span></span></span><span class=line><span class=ln> 70</span><span class=cl><span class=w>        </span>- --<span class=l>upstream=http://127.0.0.1:8080/</span><span class=w>
</span></span></span><span class=line><span class=ln> 71</span><span class=cl><span class=w>        </span>- --<span class=l>logtostderr=true</span><span class=w>
</span></span></span><span class=line><span class=ln> 72</span><span class=cl><span class=w>        </span>- --<span class=l>v=10</span><span class=w>
</span></span></span><span class=line><span class=ln> 73</span><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 74</span><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OPERATOR_CONDITION_NAME</span><span class=w>
</span></span></span><span class=line><span class=ln> 75</span><span class=cl><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=l>memcached-operator.v0.0.1</span><span class=w>
</span></span></span><span class=line><span class=ln> 76</span><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>gcr.io/kubebuilder/kube-rbac-proxy:v0.8.0</span><span class=w>
</span></span></span><span class=line><span class=ln> 77</span><span class=cl><span class=w>        </span><span class=nt>imagePullPolicy</span><span class=p>:</span><span class=w> </span><span class=l>IfNotPresent</span><span class=w>
</span></span></span><span class=line><span class=ln> 78</span><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>kube-rbac-proxy</span><span class=w>
</span></span></span><span class=line><span class=ln> 79</span><span class=cl><span class=w>        </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 80</span><span class=cl><span class=w>        </span>- <span class=nt>containerPort</span><span class=p>:</span><span class=w> </span><span class=m>8443</span><span class=w>
</span></span></span><span class=line><span class=ln> 81</span><span class=cl><span class=w>          </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>https</span><span class=w>
</span></span></span><span class=line><span class=ln> 82</span><span class=cl><span class=w>          </span><span class=nt>protocol</span><span class=p>:</span><span class=w> </span><span class=l>TCP</span><span class=w>
</span></span></span><span class=line><span class=ln> 83</span><span class=cl><span class=w>        </span><span class=nt>resources</span><span class=p>:</span><span class=w> </span>{}<span class=w>
</span></span></span><span class=line><span class=ln> 84</span><span class=cl><span class=w>        </span><span class=nt>terminationMessagePath</span><span class=p>:</span><span class=w> </span><span class=l>/dev/termination-log</span><span class=w>
</span></span></span><span class=line><span class=ln> 85</span><span class=cl><span class=w>        </span><span class=nt>terminationMessagePolicy</span><span class=p>:</span><span class=w> </span><span class=l>File</span><span class=w>
</span></span></span><span class=line><span class=ln> 86</span><span class=cl><span class=w>      </span>- <span class=nt>args</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 87</span><span class=cl><span class=w>        </span>- --<span class=l>health-probe-bind-address=:8081</span><span class=w>
</span></span></span><span class=line><span class=ln> 88</span><span class=cl><span class=w>        </span>- --<span class=l>metrics-bind-address=127.0.0.1:8080</span><span class=w>
</span></span></span><span class=line><span class=ln> 89</span><span class=cl><span class=w>        </span>- --<span class=l>leader-elect</span><span class=w>
</span></span></span><span class=line><span class=ln> 90</span><span class=cl><span class=w>        </span><span class=nt>command</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 91</span><span class=cl><span class=w>        </span>- <span class=l>/manager</span><span class=w>
</span></span></span><span class=line><span class=ln> 92</span><span class=cl><span class=w>        </span><span class=nt>env</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 93</span><span class=cl><span class=w>        </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>OPERATOR_CONDITION_NAME</span><span class=w>
</span></span></span><span class=line><span class=ln> 94</span><span class=cl><span class=w>          </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=l>memcached-operator.v0.0.1</span><span class=w>
</span></span></span><span class=line><span class=ln> 95</span><span class=cl><span class=w>        </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>brightzheng100/memcached-operator:v0.0.1</span><span class=w>
</span></span></span><span class=line><span class=ln> 96</span><span class=cl><span class=w>        </span><span class=nt>imagePullPolicy</span><span class=p>:</span><span class=w> </span><span class=l>IfNotPresent</span><span class=w>
</span></span></span><span class=line><span class=ln> 97</span><span class=cl><span class=w>        </span><span class=nt>livenessProbe</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln> 98</span><span class=cl><span class=w>          </span><span class=nt>failureThreshold</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=ln> 99</span><span class=cl><span class=w>          </span><span class=nt>httpGet</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>100</span><span class=cl><span class=w>            </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/healthz</span><span class=w>
</span></span></span><span class=line><span class=ln>101</span><span class=cl><span class=w>            </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>8081</span><span class=w>
</span></span></span><span class=line><span class=ln>102</span><span class=cl><span class=w>            </span><span class=nt>scheme</span><span class=p>:</span><span class=w> </span><span class=l>HTTP</span><span class=w>
</span></span></span><span class=line><span class=ln>103</span><span class=cl><span class=w>          </span><span class=nt>initialDelaySeconds</span><span class=p>:</span><span class=w> </span><span class=m>15</span><span class=w>
</span></span></span><span class=line><span class=ln>104</span><span class=cl><span class=w>          </span><span class=nt>periodSeconds</span><span class=p>:</span><span class=w> </span><span class=m>20</span><span class=w>
</span></span></span><span class=line><span class=ln>105</span><span class=cl><span class=w>          </span><span class=nt>successThreshold</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=ln>106</span><span class=cl><span class=w>          </span><span class=nt>timeoutSeconds</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=ln>107</span><span class=cl><span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>manager</span><span class=w>
</span></span></span><span class=line><span class=ln>108</span><span class=cl><span class=w>        </span><span class=nt>readinessProbe</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>109</span><span class=cl><span class=w>          </span><span class=nt>failureThreshold</span><span class=p>:</span><span class=w> </span><span class=m>3</span><span class=w>
</span></span></span><span class=line><span class=ln>110</span><span class=cl><span class=w>          </span><span class=nt>httpGet</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>111</span><span class=cl><span class=w>            </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=l>/readyz</span><span class=w>
</span></span></span><span class=line><span class=ln>112</span><span class=cl><span class=w>            </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>8081</span><span class=w>
</span></span></span><span class=line><span class=ln>113</span><span class=cl><span class=w>            </span><span class=nt>scheme</span><span class=p>:</span><span class=w> </span><span class=l>HTTP</span><span class=w>
</span></span></span><span class=line><span class=ln>114</span><span class=cl><span class=w>          </span><span class=nt>initialDelaySeconds</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span></span></span><span class=line><span class=ln>115</span><span class=cl><span class=w>          </span><span class=nt>periodSeconds</span><span class=p>:</span><span class=w> </span><span class=m>10</span><span class=w>
</span></span></span><span class=line><span class=ln>116</span><span class=cl><span class=w>          </span><span class=nt>successThreshold</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=ln>117</span><span class=cl><span class=w>          </span><span class=nt>timeoutSeconds</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span><span class=line><span class=ln>118</span><span class=cl><span class=w>        </span><span class=nt>resources</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>119</span><span class=cl><span class=w>          </span><span class=nt>limits</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>120</span><span class=cl><span class=w>            </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=l>100m</span><span class=w>
</span></span></span><span class=line><span class=ln>121</span><span class=cl><span class=w>            </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>30Mi</span><span class=w>
</span></span></span><span class=line><span class=ln>122</span><span class=cl><span class=w>          </span><span class=nt>requests</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>123</span><span class=cl><span class=w>            </span><span class=nt>cpu</span><span class=p>:</span><span class=w> </span><span class=l>100m</span><span class=w>
</span></span></span><span class=line><span class=ln>124</span><span class=cl><span class=w>            </span><span class=nt>memory</span><span class=p>:</span><span class=w> </span><span class=l>20Mi</span><span class=w>
</span></span></span><span class=line><span class=ln>125</span><span class=cl><span class=w>        </span><span class=nt>securityContext</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>126</span><span class=cl><span class=w>          </span><span class=nt>allowPrivilegeEscalation</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=ln>127</span><span class=cl><span class=w>        </span><span class=nt>terminationMessagePath</span><span class=p>:</span><span class=w> </span><span class=l>/dev/termination-log</span><span class=w>
</span></span></span><span class=line><span class=ln>128</span><span class=cl><span class=w>        </span><span class=nt>terminationMessagePolicy</span><span class=p>:</span><span class=w> </span><span class=l>File</span><span class=w>
</span></span></span><span class=line><span class=ln>129</span><span class=cl><span class=w>      </span><span class=nt>dnsPolicy</span><span class=p>:</span><span class=w> </span><span class=l>ClusterFirst</span><span class=w>
</span></span></span><span class=line><span class=ln>130</span><span class=cl><span class=w>      </span><span class=nt>restartPolicy</span><span class=p>:</span><span class=w> </span><span class=l>Always</span><span class=w>
</span></span></span><span class=line><span class=ln>131</span><span class=cl><span class=w>      </span><span class=nt>schedulerName</span><span class=p>:</span><span class=w> </span><span class=l>default-scheduler</span><span class=w>
</span></span></span><span class=line><span class=ln>132</span><span class=cl><span class=w>      </span><span class=nt>securityContext</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>133</span><span class=cl><span class=w>        </span><span class=nt>runAsNonRoot</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln>134</span><span class=cl><span class=w>      </span><span class=nt>serviceAccount</span><span class=p>:</span><span class=w> </span><span class=l>memcached-operator-controller-manager</span><span class=w>
</span></span></span><span class=line><span class=ln>135</span><span class=cl><span class=w>      </span><span class=nt>serviceAccountName</span><span class=p>:</span><span class=w> </span><span class=l>memcached-operator-controller-manager</span><span class=w>
</span></span></span><span class=line><span class=ln>136</span><span class=cl><span class=w>      </span><span class=nt>terminationGracePeriodSeconds</span><span class=p>:</span><span class=w> </span><span class=m>1</span><span class=w>
</span></span></span></code></pre></div><p>Two interesting findings:</p><ol><li><p>There is a sidecar container named <code>kube-rbac-proxy</code> with image of <code>gcr.io/kubebuilder/kube-rbac-proxy:v0.8.0</code>;</p></li><li><p>From the <code>ownerReferences</code> section we know that the operator's parent is <code>ClusterServiceVersion/memcached-operator.v0.0.1</code></p></li></ol><p>There are no good docs in offical <a href=https://sdk.operatorframework.io/docs/>docs</a>.</p><p>Actuall it derives from this <a href=https://github.com/brancz/kube-rbac-proxy>repo</a> and is hosted by the Kubebuilder team in GCR. The main goal of having this container injected as a sidecar is to be a small HTTP proxy that can perform RBAC authorization against the Kubernetes API using SubjectAccessReview to protect the operator behind.</p><p>The schema of <code>ClusterServiceVersion/memcached-operator.v0.0.1</code> can be found in file <code>bundle/manifests/memcached-operator.clusterserviceversion.yaml</code> and you might find this in the YAML file:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=ln>1</span><span class=cl><span class=w>  </span><span class=nt>installModes</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=ln>2</span><span class=cl><span class=w>  </span>- <span class=nt>supported</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=ln>3</span><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>OwnNamespace</span><span class=w>
</span></span></span><span class=line><span class=ln>4</span><span class=cl><span class=w>  </span>- <span class=nt>supported</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=ln>5</span><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>SingleNamespace</span><span class=w>
</span></span></span><span class=line><span class=ln>6</span><span class=cl><span class=w>  </span>- <span class=nt>supported</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=ln>7</span><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>MultiNamespace</span><span class=w>
</span></span></span><span class=line><span class=ln>8</span><span class=cl><span class=w>  </span>- <span class=nt>supported</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=ln>9</span><span class=cl><span class=w>    </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>AllNamespaces</span><span class=w>
</span></span></span></code></pre></div><p>So by default, the CSV generated by Operator SDK supports the operator to monitor <code>AllNamespaces</code> for the CR, which is <code>Memcached</code> in our case -- that's why we just created our CR in the <code>default</code> namespace and it still worked fine.</p><h2 id=how-about-upgrade>How about upgrade?</h2><p>Since it's named <code>Operator Lifecycle Manager</code>, let's see how it handles operator upgrades.</p><h3 id=make-more-changes-in-our-operator-code>Make more changes in our operator code</h3><p>Remember the "huge" change we made in part 1 for our operator, we will make even bigger change:)</p><p>In <code>controllers/memcached_controller.go</code>, from:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=ln>1</span><span class=cl><span class=nx>r</span><span class=p>.</span><span class=nx>Log</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;great, the Reconcile is really triggered!&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>To:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=ln>1</span><span class=cl><span class=nx>r</span><span class=p>.</span><span class=nx>Log</span><span class=p>.</span><span class=nf>Info</span><span class=p>(</span><span class=s>&#34;great, the Reconcile is really triggered in v2!&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=build-and-publish-the-operator-image>Build and publish the operator image</h3><p>As usual, let's build the publish the image. But this time we're going to specify the version:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln>1</span><span class=cl><span class=c1># Docker build and push with a specified VERSION to replace the default 0.0.1</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>$ make docker-build docker-push <span class=nv>VERSION</span><span class=o>=</span>0.0.2
</span></span></code></pre></div><h3 id=build-and-publish-the-operator-bundle-image>Build and publish the operator bundle image</h3><p>Now we can refresh the bundle with the new version, and then push the build and push the bundle image to publish:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln>1</span><span class=cl><span class=c1># Bundle it with specified VERSION too, this will update the CSV file</span>
</span></span><span class=line><span class=ln>2</span><span class=cl>$ make bundle <span class=nv>VERSION</span><span class=o>=</span>0.0.2
</span></span><span class=line><span class=ln>3</span><span class=cl>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=c1># Then build and push the bundle image</span>
</span></span><span class=line><span class=ln>5</span><span class=cl>$ make bundle-build bundle-push <span class=nv>VERSION</span><span class=o>=</span>0.0.2
</span></span></code></pre></div><p>We even can check the locally cached Docker images:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln>1</span><span class=cl>$ docker images <span class=p>|</span> grep memcached
</span></span><span class=line><span class=ln>2</span><span class=cl>brightzheng100/memcached-operator-bundle              v0.0.2        dc0a255ecff9   <span class=m>19</span> seconds ago   10.1kB
</span></span><span class=line><span class=ln>3</span><span class=cl>brightzheng100/memcached-operator                     v0.0.2        b3e76e7f5f78   <span class=m>6</span> minutes ago    47.4MB
</span></span><span class=line><span class=ln>4</span><span class=cl>...
</span></span></code></pre></div><h3 id=upgrade-the-operator-by-upgrading-the-bundle>Upgrade the operator by upgrading the bundle</h3><p>Finally, let's upgrade the bundle:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln> 1</span><span class=cl>$ operator-sdk run bundle-upgrade docker.io/brightzheng100/memcached-operator-bundle:v0.0.2 -n operators
</span></span><span class=line><span class=ln> 2</span><span class=cl>INFO<span class=o>[</span>0005<span class=o>]</span> Found existing subscription with name memcached-operator-v0-0-1-sub and namespace operators
</span></span><span class=line><span class=ln> 3</span><span class=cl>INFO<span class=o>[</span>0005<span class=o>]</span> Found existing catalog <span class=nb>source</span> with name memcached-operator-catalog and namespace operators
</span></span><span class=line><span class=ln> 4</span><span class=cl>INFO<span class=o>[</span>0013<span class=o>]</span> Successfully created registry pod: docker-io-brightzheng100-memcached-operator-bundle-v0-0-2
</span></span><span class=line><span class=ln> 5</span><span class=cl>INFO<span class=o>[</span>0013<span class=o>]</span> Updated catalog <span class=nb>source</span> memcached-operator-catalog with address and annotations
</span></span><span class=line><span class=ln> 6</span><span class=cl>INFO<span class=o>[</span>0013<span class=o>]</span> Deleted previous registry pod with name <span class=s2>&#34;docker-io-brightzheng100-memcached-operator-bundle-v0-0-1&#34;</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>INFO<span class=o>[</span>0047<span class=o>]</span> Approved InstallPlan install-jgbx7 <span class=k>for</span> the Subscription: memcached-operator-v0-0-1-sub
</span></span><span class=line><span class=ln> 8</span><span class=cl>INFO<span class=o>[</span>0047<span class=o>]</span> Waiting <span class=k>for</span> ClusterServiceVersion <span class=s2>&#34;operators/memcached-operator.v0.0.2&#34;</span> to reach <span class=s1>&#39;Succeeded&#39;</span> phase
</span></span><span class=line><span class=ln> 9</span><span class=cl>INFO<span class=o>[</span>0047<span class=o>]</span>   Waiting <span class=k>for</span> ClusterServiceVersion <span class=s2>&#34;operators/memcached-operator.v0.0.2&#34;</span> to appear
</span></span><span class=line><span class=ln>10</span><span class=cl>INFO<span class=o>[</span>0048<span class=o>]</span>   Found ClusterServiceVersion <span class=s2>&#34;operators/memcached-operator.v0.0.2&#34;</span> phase: Installing
</span></span><span class=line><span class=ln>11</span><span class=cl>INFO<span class=o>[</span>0059<span class=o>]</span>   Found ClusterServiceVersion <span class=s2>&#34;operators/memcached-operator.v0.0.2&#34;</span> phase: Succeeded
</span></span><span class=line><span class=ln>12</span><span class=cl>INFO<span class=o>[</span>0059<span class=o>]</span> Successfully upgraded to <span class=s2>&#34;memcached-operator.v0.0.2&#34;</span>
</span></span></code></pre></div><p>If you trace carefully for the upgrade process, you will find that it's quite similar to a blue-green deployment process:</p><ol><li><p>It downloads the desired version of bundle image and terminates the old bundle;</p></li><li><p>A job starts to prepare and eventually starts a pod serving as <code>operator registry</code></p></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln>1</span><span class=cl>$ kubectl logs -n operators docker-io-brightzheng100-memcached-operator-bundle-v0-0-2
</span></span><span class=line><span class=ln>2</span><span class=cl>...
</span></span><span class=line><span class=ln>3</span><span class=cl><span class=nv>time</span><span class=o>=</span><span class=s2>&#34;2021-06-06T08:20:04Z&#34;</span> <span class=nv>level</span><span class=o>=</span>info <span class=nv>msg</span><span class=o>=</span><span class=s2>&#34;Keeping server open for infinite seconds&#34;</span> <span class=nv>database</span><span class=o>=</span>/database/index.db <span class=nv>port</span><span class=o>=</span><span class=m>50051</span>
</span></span><span class=line><span class=ln>4</span><span class=cl><span class=nv>time</span><span class=o>=</span><span class=s2>&#34;2021-06-06T08:20:04Z&#34;</span> <span class=nv>level</span><span class=o>=</span>info <span class=nv>msg</span><span class=o>=</span><span class=s2>&#34;serving registry&#34;</span> <span class=nv>database</span><span class=o>=</span>/database/index.db <span class=nv>port</span><span class=o>=</span><span class=m>50051</span>
</span></span></code></pre></div><ol start=3><li>A new operator with new version is provisioned and the old operator is terminated.</li></ol><h2 id=but-wait-what-is-the-operator-bundle-and-why-bundle-image>But wait, what is the operator bundle and why bundle image?</h2><p>Even you may have followed the steps to this far, you might still be curious or even confused: what is the bundle and why?</p><p>In Operator Framework world, a <strong>"bundle"</strong> is meant to represent a specific version of an operator with a structured directory of files with one <code>ClusterServiceVersion</code>.</p><p>According to the docs <a href=https://github.com/operator-framework/operator-registry#manifest-format>here</a>: A bundle typically includes a ClusterServiceVersion and the CRDs that define the owned APIs of the CSV in its manifest directory, though additional objects may be included. It also includes an annotation file in its metadata folder which defines some higher level aggregate data that helps to describe the format and package information about how the bundle should be added into an index of bundles.</p><p>In our case the folder structure is like:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln> 1</span><span class=cl>$ tree bundle
</span></span><span class=line><span class=ln> 2</span><span class=cl>bundle
</span></span><span class=line><span class=ln> 3</span><span class=cl>├── manifests
</span></span><span class=line><span class=ln> 4</span><span class=cl>│   ├── cache.example.com_memcacheds.yaml
</span></span><span class=line><span class=ln> 5</span><span class=cl>│   ├── memcached-operator-controller-manager-metrics-service_v1_service.yaml
</span></span><span class=line><span class=ln> 6</span><span class=cl>│   ├── memcached-operator-controller-manager_v1_serviceaccount.yaml
</span></span><span class=line><span class=ln> 7</span><span class=cl>│   ├── memcached-operator-manager-config_v1_configmap.yaml
</span></span><span class=line><span class=ln> 8</span><span class=cl>│   ├── memcached-operator-metrics-reader_rbac.authorization.k8s.io_v1_clusterrole.yaml
</span></span><span class=line><span class=ln> 9</span><span class=cl>│   └── memcached-operator.clusterserviceversion.yaml
</span></span><span class=line><span class=ln>10</span><span class=cl>├── metadata
</span></span><span class=line><span class=ln>11</span><span class=cl>│   └── annotations.yaml
</span></span><span class=line><span class=ln>12</span><span class=cl>└── tests
</span></span><span class=line><span class=ln>13</span><span class=cl>    └── scorecard
</span></span><span class=line><span class=ln>14</span><span class=cl>        └── config.yaml
</span></span><span class=line><span class=ln>15</span><span class=cl>
</span></span><span class=line><span class=ln>16</span><span class=cl><span class=m>4</span> directories, <span class=m>8</span> files
</span></span></code></pre></div><p>And obviously, bundle image is a <strong>way</strong> using OCI spec container image as a method of storing the manifest and metadata contents of individual operator bundles.</p><p>So if you recall the pods we have within our <code>operators</code> namespace:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln>1</span><span class=cl>$ kubectl get pod -n operators
</span></span><span class=line><span class=ln>2</span><span class=cl>NAME                                                              READY   STATUS      RESTARTS   AGE
</span></span><span class=line><span class=ln>3</span><span class=cl>a861f25fcb3303cc6d11282fb2ecc2e886f24ff6142bb7511df62ea0caw7v7t   0/1     Completed   <span class=m>0</span>          71m
</span></span><span class=line><span class=ln>4</span><span class=cl>c551e776de29960763c9167350ea816c5da7be5de6ff4def66c1e48acc427qv   0/1     Completed   <span class=m>0</span>          74m
</span></span><span class=line><span class=ln>5</span><span class=cl>docker-io-brightzheng100-memcached-operator-bundle-v0-0-2         1/1     Running     <span class=m>0</span>          71m
</span></span><span class=line><span class=ln>6</span><span class=cl>memcached-operator-controller-manager-5f7468f5cc-rnf2b            2/2     Running     <span class=m>0</span>          70m
</span></span></code></pre></div><p>You will realize that the pod of <code>docker-io-brightzheng100-memcached-operator-bundle-v0-0-2</code> is serving as a <code>gRPC</code> source for OLM to discover the operators by an object with the type of <code>CatalogSource</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln> 1</span><span class=cl><span class=c1># Let&#39;s see what CatalogSource objects we have</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>$ kubectl get CatalogSource -n operators
</span></span><span class=line><span class=ln> 3</span><span class=cl>NAME                         DISPLAY              TYPE   PUBLISHER      AGE
</span></span><span class=line><span class=ln> 4</span><span class=cl>memcached-operator-catalog   memcached-operator   grpc   operator-sdk   77m
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=c1># How this CatalogSource looks like</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>$ kubectl get CatalogSource/memcached-operator-catalog -n operators -o yaml
</span></span><span class=line><span class=ln> 8</span><span class=cl>apiVersion: operators.coreos.com/v1alpha1
</span></span><span class=line><span class=ln> 9</span><span class=cl>kind: CatalogSource
</span></span><span class=line><span class=ln>10</span><span class=cl>metadata:
</span></span><span class=line><span class=ln>11</span><span class=cl>  &lt;OMITTED&gt;
</span></span><span class=line><span class=ln>12</span><span class=cl>  name: memcached-operator-catalog
</span></span><span class=line><span class=ln>13</span><span class=cl>  namespace: operators
</span></span><span class=line><span class=ln>14</span><span class=cl>spec:
</span></span><span class=line><span class=ln>15</span><span class=cl>  address: 10.244.1.18:50051
</span></span><span class=line><span class=ln>16</span><span class=cl>  displayName: memcached-operator
</span></span><span class=line><span class=ln>17</span><span class=cl>  icon:
</span></span><span class=line><span class=ln>18</span><span class=cl>    base64data: <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=ln>19</span><span class=cl>    mediatype: <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=ln>20</span><span class=cl>  publisher: operator-sdk
</span></span><span class=line><span class=ln>21</span><span class=cl>  secrets:
</span></span><span class=line><span class=ln>22</span><span class=cl>  - <span class=s2>&#34;&#34;</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>  sourceType: grpc
</span></span><span class=line><span class=ln>24</span><span class=cl>status:
</span></span><span class=line><span class=ln>25</span><span class=cl>  connectionState:
</span></span><span class=line><span class=ln>26</span><span class=cl>    address: 10.244.1.18:50051
</span></span><span class=line><span class=ln>27</span><span class=cl>    lastConnect: <span class=s2>&#34;2021-06-06T08:20:08Z&#34;</span>
</span></span><span class=line><span class=ln>28</span><span class=cl>    lastObservedState: READY
</span></span><span class=line><span class=ln>29</span><span class=cl>  registryService:
</span></span><span class=line><span class=ln>30</span><span class=cl>    createdAt: <span class=s2>&#34;2021-06-06T08:16:47Z&#34;</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>    protocol: grpc
</span></span></code></pre></div><p>See this <code>address: 10.244.1.18:50051</code>, which is being served exactly by the pod of <code>docker-io-brightzheng100-memcached-operator-bundle-v0-0-2</code>, as the <strong>operator registry</strong>.</p><p>There must be a <code>subscription</code> too, to subscribe for the desired operator, and here it is:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln> 1</span><span class=cl><span class=c1># Yes, there is a subscription</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>$ kubectl get subscription -n operators
</span></span><span class=line><span class=ln> 3</span><span class=cl>NAME                            PACKAGE              SOURCE                       CHANNEL
</span></span><span class=line><span class=ln> 4</span><span class=cl>memcached-operator-v0-0-1-sub   memcached-operator   memcached-operator-catalog   alpha
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=c1># And the content is like this</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>$ kg subscription/memcached-operator-v0-0-1-sub -n operators -o yaml
</span></span><span class=line><span class=ln> 8</span><span class=cl>apiVersion: operators.coreos.com/v1alpha1
</span></span><span class=line><span class=ln> 9</span><span class=cl>kind: Subscription
</span></span><span class=line><span class=ln>10</span><span class=cl>metadata:
</span></span><span class=line><span class=ln>11</span><span class=cl>  name: memcached-operator-v0-0-1-sub
</span></span><span class=line><span class=ln>12</span><span class=cl>  namespace: operators
</span></span><span class=line><span class=ln>13</span><span class=cl>spec:
</span></span><span class=line><span class=ln>14</span><span class=cl>  channel: alpha
</span></span><span class=line><span class=ln>15</span><span class=cl>  installPlanApproval: Manual
</span></span><span class=line><span class=ln>16</span><span class=cl>  name: memcached-operator
</span></span><span class=line><span class=ln>17</span><span class=cl>  source: memcached-operator-catalog
</span></span><span class=line><span class=ln>18</span><span class=cl>  sourceNamespace: operators
</span></span><span class=line><span class=ln>19</span><span class=cl>  startingCSV: memcached-operator.v0.0.1
</span></span></code></pre></div><p>Now things are very clear:</p><ol><li><p>Using the bundle here is to set up an <strong>operator registry</strong> source for OLM to discover our operators -- this is more from a development lifecycle perspective;</p></li><li><p>In the real world, it's more likely we're refering to a well-known registry, like <a href=https://operatorhub.io/>OperatorHub.io</a>. In this case, what we need to do, in most of the cases, is to define the <code>CatalogSource</code> and <code>Subscription</code> objects.</p></li></ol><h2 id=lets-further-prove-it-by-using-the-etcd-operator-published-in-operatorhubio>Let's further prove it by using the <code>etcd</code> operator published in OperatorHub.io</h2><p>If we check carefully you would have found that there is already a <code>CatalogSource</code> with curated community operators pre-installed:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln> 1</span><span class=cl><span class=c1># Check out the catalogsource in olm</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>$ kubectl get catalogsource -n olm
</span></span><span class=line><span class=ln> 3</span><span class=cl>NAME                    DISPLAY               TYPE   PUBLISHER        AGE
</span></span><span class=line><span class=ln> 4</span><span class=cl>operatorhubio-catalog   Community Operators   grpc   OperatorHub.io   7d19h
</span></span><span class=line><span class=ln> 5</span><span class=cl>
</span></span><span class=line><span class=ln> 6</span><span class=cl><span class=c1># See the content</span>
</span></span><span class=line><span class=ln> 7</span><span class=cl>$ kubectl get catalogsource/operatorhubio-catalog -n olm -o yaml
</span></span><span class=line><span class=ln> 8</span><span class=cl>apiVersion: operators.coreos.com/v1alpha1
</span></span><span class=line><span class=ln> 9</span><span class=cl>kind: CatalogSource
</span></span><span class=line><span class=ln>10</span><span class=cl>metadata:
</span></span><span class=line><span class=ln>11</span><span class=cl>  name: operatorhubio-catalog
</span></span><span class=line><span class=ln>12</span><span class=cl>  namespace: olm
</span></span><span class=line><span class=ln>13</span><span class=cl>spec:
</span></span><span class=line><span class=ln>14</span><span class=cl>  displayName: Community Operators
</span></span><span class=line><span class=ln>15</span><span class=cl>  image: quay.io/operatorhubio/catalog:latest
</span></span><span class=line><span class=ln>16</span><span class=cl>  publisher: OperatorHub.io
</span></span><span class=line><span class=ln>17</span><span class=cl>  sourceType: grpc
</span></span></code></pre></div><p>Now let's pick the <code>etcd</code> operator, which is published in <a href=https://operatorhub.io/>OperatorHub.io</a>, as example to walk through the operator UX from a <strong>service provider</strong> standpoint.</p><blockquote><p>Note: Hey, you may refer to <a href=https://operatorhub.io/operator/etcd>here</a> for this operator details.</p></blockquote><p>We will use a "raw" way to walk it through to see how it works with OLM.</p><ol><li>Install the <code>etcd</code> operator by subscribing to the <code>operatorhubio-catalog</code> <code>CatalogSource</code>:</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln> 1</span><span class=cl><span class=c1># Install the etcd operator</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>kubectl apply -f - <span class=s>&lt;&lt;EOF
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=s>---
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=s>apiVersion: v1
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=s>kind: Namespace
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=s>metadata:
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=s>  name: my-etcd
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=s>---
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=s>apiVersion: operators.coreos.com/v1
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=s>kind: OperatorGroup
</span></span></span><span class=line><span class=ln>11</span><span class=cl><span class=s>metadata:
</span></span></span><span class=line><span class=ln>12</span><span class=cl><span class=s>  name: operatorgroup
</span></span></span><span class=line><span class=ln>13</span><span class=cl><span class=s>  namespace: my-etcd
</span></span></span><span class=line><span class=ln>14</span><span class=cl><span class=s>spec:
</span></span></span><span class=line><span class=ln>15</span><span class=cl><span class=s>  targetNamespaces:
</span></span></span><span class=line><span class=ln>16</span><span class=cl><span class=s>  - my-etcd
</span></span></span><span class=line><span class=ln>17</span><span class=cl><span class=s>---
</span></span></span><span class=line><span class=ln>18</span><span class=cl><span class=s>apiVersion: operators.coreos.com/v1alpha1
</span></span></span><span class=line><span class=ln>19</span><span class=cl><span class=s>kind: Subscription
</span></span></span><span class=line><span class=ln>20</span><span class=cl><span class=s>metadata:
</span></span></span><span class=line><span class=ln>21</span><span class=cl><span class=s>  name: my-etcd
</span></span></span><span class=line><span class=ln>22</span><span class=cl><span class=s>  namespace: my-etcd
</span></span></span><span class=line><span class=ln>23</span><span class=cl><span class=s>spec:
</span></span></span><span class=line><span class=ln>24</span><span class=cl><span class=s>  channel: singlenamespace-alpha
</span></span></span><span class=line><span class=ln>25</span><span class=cl><span class=s>  name: etcd
</span></span></span><span class=line><span class=ln>26</span><span class=cl><span class=s>  source: operatorhubio-catalog   # refer to the catalogsource/operatorhubio-catalog
</span></span></span><span class=line><span class=ln>27</span><span class=cl><span class=s>  sourceNamespace: olm            # in olm namespace
</span></span></span><span class=line><span class=ln>28</span><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=ln>29</span><span class=cl>
</span></span><span class=line><span class=ln>30</span><span class=cl><span class=c1># In seconds, you will see the etcd operator is up and running</span>
</span></span><span class=line><span class=ln>31</span><span class=cl>$ kubectl get csv,pod -n my-etcd
</span></span><span class=line><span class=ln>32</span><span class=cl>NAME                                                                   DISPLAY              VERSION   REPLACES                    PHASE
</span></span><span class=line><span class=ln>33</span><span class=cl>clusterserviceversion.operators.coreos.com/etcdoperator.v0.9.4         etcd                 0.9.4     etcdoperator.v0.9.2         Succeeded
</span></span><span class=line><span class=ln>34</span><span class=cl>clusterserviceversion.operators.coreos.com/memcached-operator.v0.0.2   Memcached Operator   0.0.2     memcached-operator.v0.0.1   Succeeded
</span></span><span class=line><span class=ln>35</span><span class=cl>
</span></span><span class=line><span class=ln>36</span><span class=cl>NAME                                 READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=ln>37</span><span class=cl>pod/etcd-operator-59b94dd6df-v2xw2   3/3     Running   <span class=m>0</span>          55s
</span></span></code></pre></div><ol start=2><li>Declare and create the desired <code>etcd</code> cluster:</li></ol><p>Once the operator is ready, it's time to create an <code>etcd</code> CR to provision a <code>etcd</code> cluster in an easy way:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=ln> 1</span><span class=cl><span class=c1># Create the EtcdCluster CR</span>
</span></span><span class=line><span class=ln> 2</span><span class=cl>$ kubectl -n my-etcd apply -f - <span class=s>&lt;&lt;EOF
</span></span></span><span class=line><span class=ln> 3</span><span class=cl><span class=s>apiVersion: etcd.database.coreos.com/v1beta2
</span></span></span><span class=line><span class=ln> 4</span><span class=cl><span class=s>kind: EtcdCluster
</span></span></span><span class=line><span class=ln> 5</span><span class=cl><span class=s>metadata:
</span></span></span><span class=line><span class=ln> 6</span><span class=cl><span class=s>  name: example
</span></span></span><span class=line><span class=ln> 7</span><span class=cl><span class=s>spec:
</span></span></span><span class=line><span class=ln> 8</span><span class=cl><span class=s>  size: 3
</span></span></span><span class=line><span class=ln> 9</span><span class=cl><span class=s>  version: 3.2.13
</span></span></span><span class=line><span class=ln>10</span><span class=cl><span class=s>EOF</span>
</span></span><span class=line><span class=ln>11</span><span class=cl>
</span></span><span class=line><span class=ln>12</span><span class=cl><span class=c1># Soon we will see the cluster is provisioned with desired 3 nodes</span>
</span></span><span class=line><span class=ln>13</span><span class=cl>$ kubectl get pod -n my-etcd
</span></span><span class=line><span class=ln>14</span><span class=cl>NAME                             READY   STATUS    RESTARTS   AGE
</span></span><span class=line><span class=ln>15</span><span class=cl>etcd-operator-59b94dd6df-v2xw2   3/3     Running   <span class=m>0</span>          17m
</span></span><span class=line><span class=ln>16</span><span class=cl>example-6sklt68tzj               1/1     Running   <span class=m>0</span>          2m54s
</span></span><span class=line><span class=ln>17</span><span class=cl>example-fkz5dswdd8               1/1     Running   <span class=m>0</span>          2m6s
</span></span><span class=line><span class=ln>18</span><span class=cl>example-fxlhbr9mpf               1/1     Running   <span class=m>0</span>          86s
</span></span><span class=line><span class=ln>19</span><span class=cl>
</span></span><span class=line><span class=ln>20</span><span class=cl><span class=c1># Let&#39;s log into it to have a try</span>
</span></span><span class=line><span class=ln>21</span><span class=cl>k <span class=nb>exec</span> -it -n my-etcd example-6sklt68tzj -- sh
</span></span><span class=line><span class=ln>22</span><span class=cl>/ <span class=c1># etcdctl --endpoints http://127.0.0.1:2379 ls /</span>
</span></span><span class=line><span class=ln>23</span><span class=cl>/ <span class=c1># etcdctl --endpoints http://127.0.0.1:2379 set /my-key my-value</span>
</span></span><span class=line><span class=ln>24</span><span class=cl>my-value
</span></span><span class=line><span class=ln>25</span><span class=cl>/ <span class=c1># etcdctl --endpoints http://127.0.0.1:2379 ls /</span>
</span></span><span class=line><span class=ln>26</span><span class=cl>/my-key
</span></span></code></pre></div><p>Yep, it works perfectly fine.</p><h2 id=conclusion>Conclusion</h2><p><a href=https://operatorframework.io/>Operator Framework</a> offers two major components:</p><ul><li><a href=https://sdk.operatorframework.io/><code>Operator SDK</code></a>; and</li><li><a href=https://olm.operatorframework.io/><code>Operator Lifecycle Manager (OLM)</code></a></li></ul><p>In <a href=/post/2021/06/diving-deeper-into-operator-framework-part1/>part 1</a>, we've learned that <a href=https://sdk.operatorframework.io/><code>Operator SDK</code></a> has been a great tool to boost productivity for Kubernetes operator developers with a series of cool features:</p><ul><li>Project scaffolding and code generation to bootstrap a new project fast</li><li>High level APIs and abstractions so developer can write the operational logic more intuitively</li><li>Extensions to cover more common operator use cases</li></ul><p>In this part 2, we've dived deeper into <a href=https://olm.operatorframework.io/><code>Operator Lifecycle Manager (OLM)</code></a> which focuses more on the operator itself, around its lifecycle management.
OLM defines a precise operational model to cover <strong>bundling</strong>, <strong>distribution</strong>, <strong>discovery</strong>, and <strong>provisioning</strong> so that we have a better way to collaborate, manage and operate Kubernetes-native applications, aka operators.</p><p><img src=/images/2021/post-diving-deeper-into-operator-framework-part2-model.png alt="OLM Model"></p><p>As a result, <a href=https://operatorframework.io/>Operator Framework</a> has become one of the best tools while building native Kubenetes applications and platforms on top of Kubenetes foundation.</p><p>Now if you look back to this quote, you will have deeper understanding of the rational:</p><style type=text/css>.twitter-tweet{font:14px/1.45 '-apple-system',BlinkMacSystemFont,segoe ui,Roboto,Oxygen-Sans,Ubuntu,Cantarell,helvetica neue,sans-serif;border-left:4px solid #2b7bb9;padding-left:1.5em;color:#555}.twitter-tweet a{color:#2b7bb9;text-decoration:none}blockquote.twitter-tweet a:hover,blockquote.twitter-tweet a:focus{text-decoration:underline}</style><blockquote class=twitter-tweet><p lang=en dir=ltr>Kubernetes is a platform for building platforms. It's a better place to start; not the endgame.</p>&mdash; Kelsey Hightower (@kelseyhightower) <a href="https://twitter.com/kelseyhightower/status/935252923721793536?ref_src=twsrc%5Etfw">November 27, 2017</a></blockquote><script src=https://utteranc.es/client.js repo=brightzheng100/brightzheng100.github.io issue-term=pathname label="utterances comments 💬" theme=github-light crossorigin=anonymous async></script></article><aside class=sidebar><section class=sidebar_inner><h2>Bright Zheng</h2><div class=author_bio>A passionate technologist, solutioner, OSS contributor...and hopefully a good blogger.</div><a href=https://brightzheng100.github.io/about/ class="button mt-1" role=button title='Read More'>Read More</a><h2 class=mt-4>Featured Posts</h2><ul><li><a href=https://brightzheng100.github.io/post/2023/08/multi-tenancy-solutions-for-kubernetes-series-evaluation-criteria/ class=nav-link title="Multi-tenancy Solutions for Kubernetes Series: Evaluation Criteria">Multi-tenancy Solutions for Kubernetes Series: Evaluation Criteria</a></li><li><a href=https://brightzheng100.github.io/post/2021/06/contributing-to-oss-projects-with-git-practices-part-1/ class=nav-link title="Contributing to OSS Projects With Git Practices, Part 1">Contributing to OSS Projects With Git Practices, Part 1</a></li><li><a href=https://brightzheng100.github.io/post/2021/06/diving-deeper-into-operator-framework-part-1/ class=nav-link title="Diving Deeper Into Operator Framework, Part 1">Diving Deeper Into Operator Framework, Part 1</a></li><li><a href=https://brightzheng100.github.io/post/2021/05/adding-comments-into-hugo-powered-website/ class=nav-link title="Adding Comments Into Hugo Powered Website">Adding Comments Into Hugo Powered Website</a></li><li><a href=https://brightzheng100.github.io/post/2021/05/complete-website-setup-guide-by-github-and-hugo/ class=nav-link title="Complete Website Setup Guide by GitHub and Hugo">Complete Website Setup Guide by GitHub and Hugo</a></li></ul><h2 class=mt-4>Recent Posts</h2><ul class=flex-column><li><a href=https://brightzheng100.github.io/post/2023/08/multi-tenancy-solutions-for-kubernetes-series-evaluation-criteria/ class=nav-link title="Multi-tenancy Solutions for Kubernetes Series: Evaluation Criteria">Multi-tenancy Solutions for Kubernetes Series: Evaluation Criteria</a></li><li><a href=https://brightzheng100.github.io/post/2021/06/contributing-to-oss-projects-with-git-practices-part-1/ class=nav-link title="Contributing to OSS Projects With Git Practices, Part 1">Contributing to OSS Projects With Git Practices, Part 1</a></li><li><a href=https://brightzheng100.github.io/post/2021/06/diving-deeper-into-operator-framework-part-1/ class=nav-link title="Diving Deeper Into Operator Framework, Part 1">Diving Deeper Into Operator Framework, Part 1</a></li><li><a href=https://brightzheng100.github.io/post/2021/05/adding-comments-into-hugo-powered-website/ class=nav-link title="Adding Comments Into Hugo Powered Website">Adding Comments Into Hugo Powered Website</a></li><li><a href=https://brightzheng100.github.io/post/2021/05/complete-website-setup-guide-by-github-and-hugo/ class=nav-link title="Complete Website Setup Guide by GitHub and Hugo">Complete Website Setup Guide by GitHub and Hugo</a></li></ul><div><h2 class="mt-4 taxonomy" id=categories-section>Categories</h2><nav class=tags_nav><a href=https://brightzheng100.github.io/categories/post/ class="post_tag button button_translucent" title=post>POST
<span class=button_tally>6</span></a>
<a href=https://brightzheng100.github.io/categories/diary/ class="post_tag button button_translucent" title=diary>DIARY
<span class=button_tally>4</span></a></nav></div><div><h2 class="mt-4 taxonomy" id=tags-section>Tags</h2><nav class=tags_nav><a href=https://brightzheng100.github.io/tags/tutorial/ class="post_tag button button_translucent" title=tutorial>TUTORIAL
<span class=button_tally>5</span></a>
<a href=https://brightzheng100.github.io/tags/tips/ class="post_tag button button_translucent" title=tips>TIPS
<span class=button_tally>4</span></a>
<a href=https://brightzheng100.github.io/tags/hugo/ class="post_tag button button_translucent" title=hugo>HUGO
<span class=button_tally>3</span></a>
<a href=https://brightzheng100.github.io/tags/kubernetes/ class="post_tag button button_translucent" title=kubernetes>KUBERNETES
<span class=button_tally>3</span></a>
<a href=https://brightzheng100.github.io/tags/deepdive/ class="post_tag button button_translucent" title=deepdive>DEEPDIVE
<span class=button_tally>2</span></a>
<a href=https://brightzheng100.github.io/tags/github/ class="post_tag button button_translucent" title=github>GITHUB
<span class=button_tally>2</span></a>
<a href=https://brightzheng100.github.io/tags/operator/ class="post_tag button button_translucent" title=operator>OPERATOR
<span class=button_tally>2</span></a>
<a href=https://brightzheng100.github.io/tags/operator-framework/ class="post_tag button button_translucent" title=operator-framework>OPERATOR-FRAMEWORK
<span class=button_tally>2</span></a>
<a href=https://brightzheng100.github.io/tags/operator-sdk/ class="post_tag button button_translucent" title=operator-sdk>OPERATOR-SDK
<span class=button_tally>2</span></a>
<a href=https://brightzheng100.github.io/tags/brew/ class="post_tag button button_translucent" title=brew>BREW
<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/capsule/ class="post_tag button button_translucent" title=capsule>CAPSULE
<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/chrome/ class="post_tag button button_translucent" title=chrome>CHROME
<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/clarity/ class="post_tag button button_translucent" title=clarity>CLARITY
<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/comparison/ class="post_tag button button_translucent" title=comparison>COMPARISON
<span class=button_tally>1</span></a><br><div class="post_tags_toggle button">All Tags</div><div class=post_tags><div class=tags_list><a href=https://brightzheng100.github.io/tags/brew/ class="post_tag button button_translucent" data-position=1 title=brew>BREW<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/capsule/ class="post_tag button button_translucent" data-position=1 title=capsule>CAPSULE<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/chrome/ class="post_tag button button_translucent" data-position=1 title=chrome>CHROME<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/clarity/ class="post_tag button button_translucent" data-position=1 title=clarity>CLARITY<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/comparison/ class="post_tag button button_translucent" data-position=1 title=comparison>COMPARISON<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/deepdive/ class="post_tag button button_translucent" data-position=2 title=deepdive>DEEPDIVE<span class=button_tally>2</span></a>
<a href=https://brightzheng100.github.io/tags/evaluation/ class="post_tag button button_translucent" data-position=1 title=evaluation>EVALUATION<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/geolocation/ class="post_tag button button_translucent" data-position=1 title=geolocation>GEOLOCATION<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/git/ class="post_tag button button_translucent" data-position=1 title=git>GIT<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/github/ class="post_tag button button_translucent" data-position=2 title=github>GITHUB<span class=button_tally>2</span></a>
<a href=https://brightzheng100.github.io/tags/googleanalytics/ class="post_tag button button_translucent" data-position=1 title=googleanalytics>GOOGLEANALYTICS<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/hugo/ class="post_tag button button_translucent" data-position=3 title=hugo>HUGO<span class=button_tally>3</span></a>
<a href=https://brightzheng100.github.io/tags/integration/ class="post_tag button button_translucent" data-position=1 title=integration>INTEGRATION<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/java/ class="post_tag button button_translucent" data-position=1 title=java>JAVA<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/kubernetes/ class="post_tag button button_translucent" data-position=3 title=kubernetes>KUBERNETES<span class=button_tally>3</span></a>
<a href=https://brightzheng100.github.io/tags/macos/ class="post_tag button button_translucent" data-position=1 title=macos>MACOS<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/multitenancy/ class="post_tag button button_translucent" data-position=1 title=multitenancy>MULTITENANCY<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/operator/ class="post_tag button button_translucent" data-position=2 title=operator>OPERATOR<span class=button_tally>2</span></a>
<a href=https://brightzheng100.github.io/tags/operator-framework/ class="post_tag button button_translucent" data-position=2 title=operator-framework>OPERATOR-FRAMEWORK<span class=button_tally>2</span></a>
<a href=https://brightzheng100.github.io/tags/operator-sdk/ class="post_tag button button_translucent" data-position=2 title=operator-sdk>OPERATOR-SDK<span class=button_tally>2</span></a>
<a href=https://brightzheng100.github.io/tags/oss/ class="post_tag button button_translucent" data-position=1 title=oss>OSS<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/practices/ class="post_tag button button_translucent" data-position=1 title=practices>PRACTICES<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/python/ class="post_tag button button_translucent" data-position=1 title=python>PYTHON<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/selenium/ class="post_tag button button_translucent" data-position=1 title=selenium>SELENIUM<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/series/ class="post_tag button button_translucent" data-position=1 title=series>SERIES<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/social/ class="post_tag button button_translucent" data-position=1 title=social>SOCIAL<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/tech/ class="post_tag button button_translucent" data-position=1 title=tech>TECH<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/tips/ class="post_tag button button_translucent" data-position=4 title=tips>TIPS<span class=button_tally>4</span></a>
<a href=https://brightzheng100.github.io/tags/tutorial/ class="post_tag button button_translucent" data-position=5 title=tutorial>TUTORIAL<span class=button_tally>5</span></a>
<a href=https://brightzheng100.github.io/tags/utterances/ class="post_tag button button_translucent" data-position=1 title=utterances>UTTERANCES<span class=button_tally>1</span></a>
<a href=https://brightzheng100.github.io/tags/vcluster/ class="post_tag button button_translucent" data-position=1 title=vcluster>VCLUSTER<span class=button_tally>1</span></a><div class=tags_sort><span title="sort alphabetically">[A~Z]</span><span title="sort by count">[0~9]</span></div><span class=tags_hide><svg class="icon"><use xlink:href="#closeme"/></svg></span></div></div></nav></div></section></aside></div></main><svg width="0" height="0" class="hidden"><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="facebook"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h151V331h-60v-90h60v-61c0-49.629 40.371-90 90-90h91v90h-91v61h91l-15 90h-76v181h121c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18.001 18.001" id="twitter"><path d="M15.891 4.013c.808-.496 1.343-1.173 1.605-2.034a8.68 8.68.0 01-2.351.861c-.703-.756-1.593-1.14-2.66-1.14-1.043.0-1.924.366-2.643 1.078A3.56 3.56.0 008.766 5.383c0 .309.039.585.117.819-3.076-.105-5.622-1.381-7.628-3.837-.34.601-.51 1.213-.51 1.846.0 1.301.549 2.332 1.645 3.089-.625-.053-1.176-.211-1.645-.47.0.929.273 1.705.82 2.388a3.623 3.623.0 002.115 1.291c-.312.08-.641.118-.979.118-.312.0-.533-.026-.664-.083.23.757.664 1.371 1.291 1.841a3.652 3.652.0 002.152.743C4.148 14.173 2.625 14.69.902 14.69c-.422.0-.721-.006-.902-.038 1.697 1.102 3.586 1.649 5.676 1.649 2.139.0 4.029-.542 5.674-1.626 1.645-1.078 2.859-2.408 3.639-3.974a10.77 10.77.0 001.172-4.892v-.468a7.788 7.788.0 001.84-1.921 8.142 8.142.0 01-2.11.593z"/></symbol><symbol aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="mail"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V4e2c0 26.5-21.5 48-48 48H48c-26.5.0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5.0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="calendar"><path d="M452 40h-24V0h-40v40H124V0H84v40H60C26.916 40 0 66.916.0 1e2v352c0 33.084 26.916 60 60 60h392c33.084.0 60-26.916 60-60V1e2c0-33.084-26.916-60-60-60zm20 412c0 11.028-8.972 20-20 20H60c-11.028.0-20-8.972-20-20V188h432v264zm0-304H40v-48c0-11.028 8.972-20 20-20h24v40h40V80h264v40h40V80h24c11.028.0 20 8.972 20 20v48z"/><path d="M76 230h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 310h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zM76 390h40v40H76zm80 0h40v40h-40zm80 0h40v40h-40zm80 0h40v40h-40zm80-80h40v40h-40z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="github"><path d="M255.968 5.329C114.624 5.329.0 120.401.0 262.353c0 113.536 73.344 209.856 175.104 243.872 12.8 2.368 17.472-5.568 17.472-12.384.0-6.112-.224-22.272-.352-43.712-71.2 15.52-86.24-34.464-86.24-34.464-11.616-29.696-28.416-37.6-28.416-37.6-23.264-15.936 1.728-15.616 1.728-15.616 25.696 1.824 39.2 26.496 39.2 26.496 22.848 39.264 59.936 27.936 74.528 21.344 2.304-16.608 8.928-27.936 16.256-34.368-56.832-6.496-116.608-28.544-116.608-127.008.0-28.064 9.984-51.008 26.368-68.992-2.656-6.496-11.424-32.64 2.496-68 0 0 21.504-6.912 70.4 26.336 20.416-5.696 42.304-8.544 64.096-8.64 21.728.128 43.648 2.944 64.096 8.672 48.864-33.248 70.336-26.336 70.336-26.336 13.952 35.392 5.184 61.504 2.56 68 16.416 17.984 26.304 40.928 26.304 68.992.0 98.72-59.84 120.448-116.864 126.816 9.184 7.936 17.376 23.616 17.376 47.584.0 34.368-.32 62.08-.32 70.496.0 6.88 4.608 14.88 17.6 12.352C438.72 472.145 512 375.857 512 262.353 512 120.401 397.376 5.329 255.968 5.329z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 212 212" id="gitlab"><path d="M12.3 74.7h54L43.3 3c-1-3.6-6.4-3.6-7.6.0L12.3 74.8z"/><path d="M12.3 74.7.5 111c-1 3.2.0 6.8 3 8.8l101.6 74-92.5-119z"/><path d="M105 193.7l-38.6-119h-54l92.7 119z"/><path d="M105 193.7l38.7-119H66.4l38.7 119z"/><path d="M105 193.7l38.7-119H198l-93 119z"/><path d="M198 74.7l11.6 36.2c1 3 0 6.6-3 8.6l-101.5 74 93-119z"/><path d="M198 74.7h-54.3L167 3c1.2-3.6 6.4-3.6 7.6.0L198 74.8z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="rss"><circle cx="3.429" cy="20.571" r="3.429"/><path d="M11.429 24h4.57C15.999 15.179 8.821 8.001.0 8v4.572c6.302.001 11.429 5.126 11.429 11.428z"/><path d="M24 24C24 10.766 13.234.0.0.0v4.571c10.714.0 19.43 8.714 19.43 19.429z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="linkedin"><path d="M437 0H75C33.648.0.0 33.648.0 75v362c0 41.352 33.648 75 75 75h362c41.352.0 75-33.648 75-75V75c0-41.352-33.648-75-75-75zM181 406h-60V196h60zm0-240h-60v-60h60zm210 240h-60V286c0-16.54-13.46-30-30-30s-30 13.46-30 30v120h-60V196h60v11.309C286.719 202.422 296.93 196 316 196c40.691.043 75 36.547 75 79.688zm0 0"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" id="arrow"><path d="M604.501 440.509 325.398 134.956c-5.331-5.357-12.423-7.627-19.386-7.27-6.989-.357-14.056 1.913-19.387 7.27L7.499 440.509c-9.999 10.024-9.999 26.298.0 36.323s26.223 10.024 36.222.0l262.293-287.164L568.28 476.832c9.999 10.024 26.222 10.024 36.221.0 9.999-10.023 9.999-26.298.0-36.323z"/></symbol><symbol viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" id="carly"><path d="M504.971 239.029 448 182.059V84c0-46.317-37.682-84-84-84h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c19.851.0 36 16.149 36 36v108c0 6.365 2.529 12.47 7.029 16.971L454.059 256l-47.029 47.029A24.002 24.002.0 004e2 320v108c0 19.851-16.149 36-36 36h-44c-13.255.0-24 10.745-24 24s10.745 24 24 24h44c46.318.0 84-37.683 84-84v-98.059l56.971-56.971c9.372-9.372 9.372-24.568.0-33.941zM112 192V84c0-19.851 16.149-36 36-36h44c13.255.0 24-10.745 24-24S205.255.0 192 0h-44c-46.318.0-84 37.683-84 84v98.059l-56.971 56.97c-9.373 9.373-9.373 24.568.0 33.941L64 329.941V428c0 46.317 37.682 84 84 84h44c13.255.0 24-10.745 24-24s-10.745-24-24-24h-44c-19.851.0-36-16.149-36-36V320c0-6.365-2.529-12.47-7.029-16.971L57.941 256l47.029-47.029A24.002 24.002.0 00112 192z"/></symbol><symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="copy"><path d="M23 2.75A2.75 2.75.0 0020.25.0H8.75A2.75 2.75.0 006 2.75v13.5A2.75 2.75.0 008.75 19h11.5A2.75 2.75.0 0023 16.25zM18.25 14.5h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5zm0-3h-7.5a.75.75.0 010-1.5h7.5a.75.75.0 010 1.5z"/><path d="M8.75 20.5A4.255 4.255.0 014.5 16.25V2.75c0-.086.02-.166.025-.25H3.75A2.752 2.752.0 001 5.25v16A2.752 2.752.0 003.75 24h12a2.752 2.752.0 002.75-2.75v-.75z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001" id="closeme"><path d="M284.286 256.002 506.143 34.144c7.811-7.811 7.811-20.475.0-28.285-7.811-7.81-20.475-7.811-28.285.0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285.0-7.81 7.811-7.811 20.475.0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475.0 28.285a19.938 19.938.0 0014.143 5.857 19.94 19.94.0 0014.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475.0-28.285L284.286 256.002z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" id="open-menu"><path d="M492 236H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0-160H20C8.954 76 0 84.954.0 96s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20zm0 320H20c-11.046.0-20 8.954-20 20s8.954 20 20 20h472c11.046.0 20-8.954 20-20s-8.954-20-20-20z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="instagram"><path d="M12 2.163c3.204.0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849.0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204.0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849.0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741.0 8.333.014 7.053.072c-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.668.072 4.948c.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24s3.668-.014 4.948-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948s-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403.0-6.162 2.759-6.162 6.162S8.597 18.163 12 18.163s6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zM12 16c-2.209.0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796.0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795.0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="youtube"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23.0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23.0C23.512 20.55 23.971 18.196 24 12c-.029-6.185-.484-8.549-4.385-8.816zM9 16V8l8 3.993L9 16z"/></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="stackoverflow"><path d="M21 27v-8h3v11H0V19h3v8h18z"/><path d="M17.1.2 15 1.8l7.9 10.6 2.1-1.6L17.1.2zm3.7 14.7L10.6 6.4l1.7-2 10.2 8.5-1.7 2zM7.2 12.3l12 5.6 1.1-2.4-12-5.6-1.1 2.4zm-1.8 6.8 13.56 1.96.17-2.38-13.26-2.55-.47 2.97zM19 25H5v-3h14v3z"/></symbol></svg><footer class=footer><div class="footer_inner wrap pale"><img src=https://brightzheng100.github.io/logos/icon.png class="icon icon_2 transparent" alt="The future is Bright"><p>Copyright&nbsp;<span class=year></span>&nbsp;THE FUTURE IS BRIGHT. All Rights Reserved</p><a class=to_top href=#documentTop><svg class="icon"><use xlink:href="#arrow"/></svg></a></div></footer><script type=text/javascript src=https://brightzheng100.github.io/js/bundle.min.46d7638edbb3eef6c98157e247f37410be3342575f271bd26066e23f74be20aa5cf1d1519041250f2051f7fae327ee6c2da7a5303fb9209cd69220f73ef68003.js integrity="sha512-Rtdjjtuz7vbJgVfiR/N0EL4zQldfJxvSYGbiP3S+IKpc8dFRkEElDyBR9/rjJ+5sLaelMD+5IJzWkiD3PvaAAw==" crossorigin=anonymous></script></body></html>